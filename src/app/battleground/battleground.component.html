<div *ngIf="errorMsg">
  Error: {{errorMsg}}
</div>
<div class="outerContainer" *ngIf="user$ | async as user">
  <mat-toolbar>
    <span>{{user.name}}</span>
    <span class="spacer"></span>
    {{user.gold}} gold ({{user.goldPerMinute}} / min)
  </mat-toolbar>
  <ng-container *ngIf="gameConfig$ | async as gameConfig">
    <mat-drawer-container *ngIf="battlegroundState$ | async as bgState" fxFlex="1 1 100%" autosize>
      <mat-drawer opened mode="side" position="end" fxFlex="1 1 100%">
        <app-game-drawer [user]="user" [gameConfig]="gameConfig" [towersState]="bgState.towers"></app-game-drawer>
      </mat-drawer>
      <mat-drawer-content *ngIf="battleState$ | async as battleState" fxFlex="1 1 100%" [ngStyle]="{'height': 'auto'}">
        <app-renderer [gameConfig]="gameConfig" [state]="bgState" [battleState]="battleState" fxFlex="1 1 100%">
        </app-renderer>
      </mat-drawer-content>
    </mat-drawer-container>
  </ng-container>
</div>
