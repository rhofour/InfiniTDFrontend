<app-background-layer-renderer [stage]="stage" [gameConfig]="gameConfig"
  [towersState]="state?.towers" [cellSize]="cellSize" [zIndex]=0>
</app-background-layer-renderer>
<app-tower-layer-renderer *ngIf="state" [gameConfig]="gameConfig"
  [state]="state.towers" [stage]="stage" [cellSize]="cellSize" [zIndex]=1>
</app-tower-layer-renderer>
<app-battle-layer-renderer [stage]="stage" [gameConfig]="gameConfig"
  [state]="battleState" [cellSize]="cellSize" [zIndex]=2>
</app-battle-layer-renderer>
<ng-container *ngIf="selection.getBuildTower() | async as buildTower">
  <ng-container *ngIf="selection.getBattleground() | async as battlegroundSelection">
    <app-ui-layer-renderer [stage]="stage" [cellSize]="cellSize" [gameConfig]="gameConfig"
      [bgState]="state" [battlegroundSelection]="battlegroundSelection" 
      [buildTower]="buildTower" [zIndex]=3>
    </app-ui-layer-renderer>
  </ng-container>
</ng-container>
